{"version":3,"sources":["../../src/transactions/SecretProofTransaction.js"],"names":["SecretProofTransactionBufferPackage","require","flatbuffers","address","default","SecretProofTransactionBuffer","Buffers","SecretProofTransaction","Builder","fee","version","type","deadline","hashAlgorithm","secret","recipient","stringToAddress","proof","builder","signatureVector","createSignatureVector","Array","map","Number","prototype","valueOf","signerVector","createSignerVector","deadlineVector","createDeadlineVector","feeVector","createFeeVector","byteSecret","convert","hexToUint8","length","repeat","secretVector","createSecretVector","recipientVector","createRecipientVector","byteProof","proofVector","createProofVector","startSecretProofTransactionBuffer","addSize","addSignature","addSigner","addVersion","addType","addFee","addDeadline","addHashAlgorithm","addSecret","addRecipient","addProofSize","addProof","codedSecretProof","endSecretProofTransactionBuffer","finish","bytes","asUint8Array","SecretProofTransactionSchema","VerifiableTransaction"],"mappings":"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","file":"SecretProofTransaction.js","sourcesContent":["/*\n * Copyright 2018 NEM\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @module transactions/SecretProofTransaction\n */\nimport VerifiableTransaction from './VerifiableTransaction';\nimport * as SecretProofTransactionBufferPackage from '../buffers/SecretProofTransactionBuffer';\nimport SecretProofTransactionSchema from '../schema/SecretProofTransactionSchema';\nimport convert from '../coders/convert';\n\nconst { flatbuffers } = require('flatbuffers');\nconst address = require('../coders/address').default;\n\nconst { SecretProofTransactionBuffer } = SecretProofTransactionBufferPackage.default.Buffers;\n\nexport default class SecretProofTransaction extends VerifiableTransaction {\n\tstatic get Builder() {\n\t\tclass Builder {\n\t\t\tconstructor() {\n\t\t\t\tthis.fee = [0, 0];\n\t\t\t\tthis.version = 36865;\n\t\t\t\tthis.type = 0x434C;\n\t\t\t}\n\n\t\t\taddFee(fee) {\n\t\t\t\tthis.fee = fee;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddVersion(version) {\n\t\t\t\tthis.version = version;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddType(type) {\n\t\t\t\tthis.type = type;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddDeadline(deadline) {\n\t\t\t\tthis.deadline = deadline;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddHashAlgorithm(hashAlgorithm) {\n\t\t\t\tthis.hashAlgorithm = hashAlgorithm;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddSecret(secret) {\n\t\t\t\tthis.secret = secret;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\taddRecipient(recipient) {\n\t\t\t\tthis.recipient = address.stringToAddress(recipient);\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddProof(proof) {\n\t\t\t\tthis.proof = proof;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tbuild() {\n\t\t\t\tconst builder = new flatbuffers.Builder(1);\n\n\t\t\t\t// Create vectors\n\t\t\t\tconst signatureVector = SecretProofTransactionBuffer\n\t\t\t\t\t.createSignatureVector(builder, Array(...Array(64)).map(Number.prototype.valueOf, 0));\n\t\t\t\tconst signerVector = SecretProofTransactionBuffer.createSignerVector(builder, Array(...Array(32)).map(Number.prototype.valueOf, 0));\n\t\t\t\tconst deadlineVector = SecretProofTransactionBuffer.createDeadlineVector(builder, this.deadline);\n\t\t\t\tconst feeVector = SecretProofTransactionBuffer.createFeeVector(builder, this.fee);\n\t\t\t\tconst byteSecret = convert.hexToUint8(64 > this.secret.length ? this.secret + '0'.repeat(64 - this.secret.length) : this.secret);\n\t\t\t\tconst secretVector = SecretProofTransactionBuffer.createSecretVector(builder, byteSecret);\n\t\t\t\tconst recipientVector = SecretProofTransactionBuffer.createRecipientVector(builder, this.recipient);\n\t\t\t\tconst byteProof = convert.hexToUint8(this.proof);\n\t\t\t\tconst proofVector = SecretProofTransactionBuffer.createProofVector(builder, byteProof);\n\n\t\t\t\tSecretProofTransactionBuffer.startSecretProofTransactionBuffer(builder);\n\t\t\t\tSecretProofTransactionBuffer.addSize(builder, 180 + byteProof.length);\n\t\t\t\tSecretProofTransactionBuffer.addSignature(builder, signatureVector);\n\t\t\t\tSecretProofTransactionBuffer.addSigner(builder, signerVector);\n\t\t\t\tSecretProofTransactionBuffer.addVersion(builder, this.version);\n\t\t\t\tSecretProofTransactionBuffer.addType(builder, this.type);\n\t\t\t\tSecretProofTransactionBuffer.addFee(builder, feeVector);\n\t\t\t\tSecretProofTransactionBuffer.addDeadline(builder, deadlineVector);\n\t\t\t\tSecretProofTransactionBuffer.addHashAlgorithm(builder, this.hashAlgorithm);\n\t\t\t\tSecretProofTransactionBuffer.addSecret(builder, secretVector);\n\t\t\t\tSecretProofTransactionBuffer.addRecipient(builder, recipientVector);\n\t\t\t\tSecretProofTransactionBuffer.addProofSize(builder, byteProof.length);\n\t\t\t\tSecretProofTransactionBuffer.addProof(builder, proofVector);\n\n\t\t\t\tconst codedSecretProof = SecretProofTransactionBuffer.endSecretProofTransactionBuffer(builder);\n\t\t\t\tbuilder.finish(codedSecretProof);\n\n\t\t\t\tconst bytes = builder.asUint8Array();\n\t\t\t\treturn new SecretProofTransaction(bytes, SecretProofTransactionSchema);\n\t\t\t}\n\t\t}\n\n\t\treturn Builder;\n\t}\n}\n"]}